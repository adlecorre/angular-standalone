<div class="container bg-white p-4 rounded shadow-sm mt-4">

    <div class="d-flex align-items-center justify-content-between mb-4">
        <h2 class="text-primary mb-0">Gestion de personnes</h2>
        <small class="text-muted">Total: <span class="fw-bold">{{ personnes().length }}</span></small>
    </div>

    <div class="row">
        <!-- Form column -->
        <div class="col-12 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-header bg-light">
                    <strong>Ajouter / Modifier</strong>
                </div>
                <div class="card-body">
                    <form (ngSubmit)="ajouter()" #form="ngForm" novalidate>

                        <div class="mb-3">
                            <label for="nom" class="form-label">Nom</label>
                            <input id="nom" name="nom" class="form-control" required [(ngModel)]="personne.nom" #nom="ngModel" />
                            <div *ngIf="nom.invalid && nom.dirty" class="text-danger small mt-1">Ce champ est obligatoire</div>
                        </div>

                        <div class="mb-3">
                            <label for="prenom" class="form-label">Prénom</label>
                            <input id="prenom" name="prenom" class="form-control" required [(ngModel)]="personne.prenom" #prenom="ngModel" />
                            <div *ngIf="prenom.invalid && prenom.dirty" class="text-danger small mt-1">Ce champ est obligatoire</div>
                        </div>

                        <div class="mb-3">
                            <label for="age" class="form-label">Âge</label>
                            <input id="age" name="age" type="number" class="form-control" required max="120" [(ngModel)]="personne.age" #age="ngModel" />
                            <div *ngIf="age.invalid && age.dirty" class="text-danger small mt-1">Valeur requise (≤120)</div>
                        </div>

                        <div class="d-flex gap-2">
                            <button class="btn btn-primary" [disabled]="form.invalid">Ajouter</button>
                            <button class="btn btn-outline-secondary" type="button" (click)="personne = { nom: '', prenom: '', age: 0 }">Réinitialiser</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

        <!-- List column -->
        <div class="col-12 col-lg-8">
            <div class="card h-100">
                <div class="card-header bg-light">
                    <strong>Liste des personnes</strong>
                </div>
                <div class="card-body">
                    <div *ngIf="personnes().length === 0" class="text-center text-muted py-4">Aucune personne pour l'instant.</div>

                    <ul class="list-group" *ngIf="personnes().length > 0">
                        <li *ngFor="let p of personnes(); let i = index" class="list-group-item d-flex align-items-center justify-content-between">
                            <div>
                                <div class="fw-bold">{{ p.nom }} {{ p.prenom }}</div>
                                <small class="text-muted">Âge: {{ p.age }} · ID: {{ p.id }}</small>
                            </div>

                            <div class="d-flex align-items-center gap-2">
                                <a [routerLink]="['/personne', p.id]" class="btn btn-sm btn-outline-primary" title="Voir">
                                    <i class="fa-solid fa-eye"></i>
                                </a>
                                <button (click)="supprimer(p.id)" class="btn btn-sm btn-outline-danger" title="Supprimer">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                            </div>
                        </li>
                    </ul>

                </div>
            </div>
        </div>
    </div>

</div>